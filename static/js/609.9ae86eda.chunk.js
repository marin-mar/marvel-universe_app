"use strict";(self.webpackChunkmarvel_universe_app=self.webpackChunkmarvel_universe_app||[]).push([[609],{3416:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(8683),a=n(885),s=n(2791),c=n(4304),i=n(458),o=n(2312),l=n(5284),u=n(184),h=function(e){var t=e.name,n=e.description,r=e.thumbnail,a=e.homepage,s=e.wiki;return t||(t="There is no name yet"),n||(n="There is no description yet"),n.length>200&&(n=n.slice(0,200)+"..."),r||(r="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("img",{className:"banner-character__img",src:r,alt:t,width:200,height:200}),(0,u.jsxs)("div",{className:"banner-character__info",children:[(0,u.jsx)("h2",{className:"banner-character__name",children:t}),(0,u.jsx)("p",{className:"banner-character__description",children:n}),(0,u.jsxs)("div",{className:"banner-character__buttons",children:[(0,u.jsx)(l.Z,{buttonClasses:"banner-character__button button--accent",buttonName:"Homepage",buttonUrl:a}),(0,u.jsx)(l.Z,{buttonClasses:"banner-character__button",buttonName:"Wiki",buttonUrl:s})]})]})]})},d=function(){var e=(0,s.useState)({}),t=(0,a.Z)(e,2),n=t[0],d=t[1],m=(0,c.Z)(),f=m.loading,p=m.error,x=m.getAllCharacters,b=m.getCharacter,_=m.clearError;(0,s.useEffect)((function(){g()}),[]);var v=function(e){d(e)},g=function(){var e,t=[];_(),x().then((function(n){n.forEach((function(e){"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"!==e.thumbnail&&t.push(e.id)})),e=t.sort()[Math.floor(Math.random()*t.length)],b(e).then(v)}))},j=p?(0,u.jsx)(o.Z,{}):null,N=f?(0,u.jsx)(i.Z,{}):null,Z=f||p?null:(0,u.jsx)(h,(0,r.Z)({},n));return(0,u.jsxs)("div",{className:"banner",children:[(0,u.jsxs)("div",{className:"col banner__random",children:[(0,u.jsx)("p",{className:"banner__text",children:"Random character for today:"}),(0,u.jsx)("p",{className:"banner__text",children:"Do you want to know him better?"})]}),(0,u.jsx)("div",{className:"col banner__main",children:(0,u.jsxs)("div",{className:"banner-character",children:[j,N,Z]})}),(0,u.jsxs)("div",{className:"col banner__try",children:[(0,u.jsx)("p",{className:"banner__text",children:"Or choose another one"}),(0,u.jsx)("div",{className:"banner__buttons",children:(0,u.jsx)(l.Z,{buttonClasses:"banner__button button--accent button--dark-bg",buttonName:"Try it",onClick:g})})]})]})},m=n(2318),f=n(6392),p=function(e){return(0,u.jsxs)("div",{className:"banner banner--ad",children:[(0,u.jsx)("img",{className:"banner__img",src:m,alt:"avengers",width:152,height:100}),(0,u.jsx)("div",{className:"banner__info",children:(0,u.jsxs)("h2",{className:"banner__text",children:["New comics every week!",(0,u.jsx)("br",{}),"Stay tuned!"]})}),(0,u.jsx)("img",{className:"banner__img",src:f,alt:"avengers logo",width:133,height:100})]})},x=function(e){return e.bannerCharacter?(0,u.jsx)(d,{}):(0,u.jsx)(p,{})}},5284:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(184),a=function(e){var t=e.buttonClasses,n=e.buttonName,a=e.buttonUrl,s=e.onClick,c=e.disabled,i=e.style,o=e.type;return a?(0,r.jsx)("a",{className:"button "+t,href:a,target:"_blank",rel:"noopener noreferrer",disabled:c,style:i,children:n}):(0,r.jsx)("button",{type:o||"button",className:"button "+t,onClick:s,disabled:c,style:i,children:n})}},6464:function(e,t,n){var r=n(5671),a=n(3144),s=n(136),c=n(3668),i=n(2791),o=n(2312),l=n(184),u=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={error:!1},e}return(0,a.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,l.jsx)(o.Z,{}):this.props.children}}]),n}(i.Component);t.Z=u},2312:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(4679),a=n(184),s=function(){return(0,a.jsxs)("div",{className:"error-message",children:[(0,a.jsx)("img",{className:"error-message__icon",src:r,alt:"error - try again later",width:100,height:100}),(0,a.jsx)("p",{className:"error-message__text",children:"something went wrong... try again later"})]})}},6609:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var r=n(885),a=n(2791),s=n(6907),c=n(6464),i=n(3416),o=n(2982),l=n(184),u=function(e){var t=e.cardClass,n=e.name,r=e.thumbnail;return t?t+=" character-card":t="character-card",(0,l.jsxs)("div",{className:t,children:[(0,l.jsx)("img",{src:r,alt:"character card img",className:"character-card__img",width:200,height:200}),(0,l.jsx)("span",{className:"character-card__spacer"}),(0,l.jsx)("h3",{className:"character-card__title",children:n})]})},h=n(5284),d=n(4304),m=n(458),f=n(2312),p=function(e){var t=(0,a.useState)([]),n=(0,r.Z)(t,2),s=n[0],c=n[1],i=(0,a.useState)(!1),p=(0,r.Z)(i,2),x=p[0],b=p[1],_=(0,a.useState)(0),v=(0,r.Z)(_,2),g=v[0],j=v[1],N=(0,a.useState)(!1),Z=(0,r.Z)(N,2),C=Z[0],w=Z[1],k=(0,d.Z)(),y=k.loading,E=k.error,S=k.getAllCharacters,T=(0,a.useRef)([]);(0,a.useEffect)((function(){I(!0)}),[]);var I=function(e){b(!e),S().then(U)},U=function(e){var t=!1;e.length<g&&(t=!0),c((function(t){return[].concat((0,o.Z)(t),(0,o.Z)(e))})),b((function(e){return!1})),j((function(e){return e+6})),w((function(e){return t}))},M=function(e){T.current.forEach((function(e){e.childNodes[0].classList.remove("active")})),T.current[e].childNodes[0].classList.add("active"),T.current[e].focus()},P=function(t){var n=t.slice(0,g).map((function(t,n){return(0,l.jsx)("li",{className:"character-list__item",tabIndex:0,ref:function(e){return T.current[n]=e},onClick:function(){e.onSelectedCharacterId(t.id),M(n)},onKeyPress:function(r){" "!==r.key&&"Enter"!==r.key||(e.onSelectedCharacterId(t.id),M(n))},children:(0,l.jsx)(u,{name:t.name,thumbnail:t.thumbnail})},t.id)}));return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("ul",{className:"character-list",children:n})})}(s),q=E?(0,l.jsx)(f.Z,{}):null,A=y&&!x?(0,l.jsx)(m.Z,{}):null;return(0,l.jsxs)("div",{className:"col",children:[P,q,A,P?(0,l.jsx)(h.Z,{buttonClasses:"character-list__button button--accent",buttonName:"Load more",disabled:x,style:{display:C?"none":"block"},onClick:I}):null]})};var x=n(7581),b=function(e){var t=e.data,n=t.name,r=t.description,a=t.thumbnail,s=t.homepage,c=t.wiki,i=t.comics;return i=i.length>5?i.slice(0,5):i,r.length>200&&(r=r.slice(0,200)+"..."),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("img",{className:"character-description__img",src:a,alt:n,width:200,height:200}),(0,l.jsxs)("div",{className:"col",children:[(0,l.jsx)("h2",{className:"character-description__name",children:n}),(0,l.jsxs)("div",{className:"character-description__buttons",children:[(0,l.jsx)(h.Z,{buttonClasses:"character-description__button button--accent",buttonName:"Homepage",buttonUrl:s}),(0,l.jsx)(h.Z,{buttonClasses:"character-description__button",buttonName:"Wiki",buttonUrl:c})]})]})]}),(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("p",{className:"character-description__text",children:r})}),(0,l.jsxs)("div",{className:"col",children:[(0,l.jsx)("h3",{className:"character-description__comics",children:"Comics:"}),(0,l.jsxs)("ul",{className:"character-description__comics-list",children:[i.length>0?null:"There is no comics with this character",i.map((function(e,t){return(0,l.jsx)("li",{className:"character-description__comics-item",children:e.name},t)}))]})]})]})},_=function(e){var t=(0,a.useState)(null),n=(0,r.Z)(t,2),s=n[0],c=n[1],i=(0,d.Z)(),o=i.getCharacter,u=i.clearError,h=i.process,m=i.setProcess,f=function(e){c(e)},p=function(){e.selectedCharacterId&&(u(),o(e.selectedCharacterId).then(f).then((function(){m("confirmed")})))};(0,a.useEffect)((function(){p()}),[]);var _=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e}),[e]),t.current}(e.selectedCharacterId);return(0,a.useEffect)((function(){e.selectedCharacterId!==_&&p(),p()}),[e.selectedCharacterId]),(0,l.jsx)("div",{className:"character-description",children:(0,x.Z)(h,b,s)})},v=n(3504),g=n(5705),j=n(132),N=function(){var e=(0,a.useState)(null),t=(0,r.Z)(e,2),n=t[0],s=t[1],c=(0,d.Z)(),i=c.loading,o=c.error,u=c.getCharacterByName,p=c.clearError,x=function(e){s(e)},b=o?(0,l.jsx)(f.Z,{}):null,_=i?(0,l.jsx)(m.Z,{}):null,N=n?n.length>0?(0,l.jsxs)("div",{className:"search__message--success",children:[(0,l.jsxs)("h3",{className:"search__text",children:["There is! Visit ",n[0].name," page?"]}),(0,l.jsx)(v.rU,{to:"/characters/".concat(n[0].id),children:(0,l.jsx)(h.Z,{buttonClasses:"search__button button--medium",buttonName:"To page"})})]}):(0,l.jsx)("div",{className:"search__message--error",children:(0,l.jsx)("h3",{className:"search__text",children:"The character was not found. Check the name and try again"})}):null;return(0,l.jsxs)("div",{className:"search",children:[(0,l.jsx)("h2",{className:"search__title",children:"Or find a character by name:"}),(0,l.jsx)(g.J9,{initialValues:{charName:""},validationSchema:j.Ry({charName:j.Z_().required("This field is required")}),onSubmit:function(e){!function(e){p(),u(e).then(x)}(e.charName)},children:(0,l.jsxs)(g.l0,{className:"search__form",children:[(0,l.jsx)(g.gN,{className:"search__input",type:"text",id:"charName",name:"charName",placeholder:"Enter name"}),(0,l.jsx)(h.Z,{buttonClasses:"search__button button--accent",buttonName:"Find",type:"submit",disabled:i}),(0,l.jsx)(g.Bc,{name:"charName",children:function(e){return(0,l.jsx)("div",{className:"search__message--error",children:(0,l.jsx)("h3",{className:"search__text",children:e})})}})]})}),b,_,N]})},Z=function(){var e=(0,a.useState)(null),t=(0,r.Z)(e,2),n=t[0],o=t[1];return(0,l.jsxs)(s.B6,{children:[(0,l.jsxs)(s.ql,{children:[(0,l.jsx)("title",{children:"Marvel Universe inform portal | MainPage"}),(0,l.jsx)("meta",{name:"description",content:"Marvel Universe inform portal | MainPage"})]}),(0,l.jsx)("div",{className:"banners",children:(0,l.jsx)(c.Z,{children:(0,l.jsx)(i.Z,{bannerCharacter:!0})})}),(0,l.jsxs)("div",{className:"characters",children:[(0,l.jsx)(c.Z,{children:(0,l.jsx)(p,{onSelectedCharacterId:function(e){o((function(t){return e}))}})}),(0,l.jsx)("div",{className:"description",children:(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(_,{selectedCharacterId:n}),(0,l.jsx)(N,{})]})})]})]})}},4304:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(5861),a=n(7757),s=n.n(a),c=n(885),i=n(2791),o=function(){var e=function(){var e=(0,i.useState)(!1),t=(0,c.Z)(e,2),n=t[0],a=t[1],o=(0,i.useState)(null),l=(0,c.Z)(o,2),u=l[0],h=l[1],d=(0,i.useState)("waiting"),m=(0,c.Z)(d,2),f=m[0],p=m[1],x=(0,i.useCallback)(function(){var e=(0,r.Z)(s().mark((function e(t){var n,r,c,i,o,l=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"application/json"},a(!0),p("loading"),e.prev=5,e.next=8,fetch(t,{method:n,body:r,headers:c});case 8:if((i=e.sent).ok){e.next=11;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(i.status));case 11:return e.next=13,i.json();case 13:return o=e.sent,a(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(5),a(!1),h(e.t0.message),p("error"),e.t0;case 24:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{loading:n,request:x,error:u,clearError:(0,i.useCallback)((function(){h(null),p("loading")}),[]),process:f,setProcess:p}}(),t=e.loading,n=e.request,a=e.error,o=e.clearError,l=e.process,u=e.setProcess,h="https://gateway.marvel.com:443/v1/public/",d="apikey=fdc3403625ab83ef45aae10672f12243",m=0,f=0,p=[],x=[],b=function(){var e=(0,r.Z)(s().mark((function e(){var t,r,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:100,r=a.length>1&&void 0!==a[1]?a[1]:m,e.next=4,n("".concat(h,"characters?offset=").concat(r,"&limit=").concat(t,"&").concat(d));case 4:return e.sent.data.results.forEach((function(e){m++,"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available"!==e.thumbnail.path&&p.push(e)})),e.abrupt("return",p.map(N));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)(s().mark((function e(){var t,r,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:100,r=a.length>1&&void 0!==a[1]?a[1]:f,e.next=4,n("".concat(h,"comics?dateDescriptor=thisMonth&orderBy=issueNumber&limit=").concat(t,"&offset=").concat(r,"&").concat(d));case 4:return e.sent.data.results.forEach((function(e){f++,"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available"!==e.thumbnail.path&&x.push(e)})),e.abrupt("return",x.map(Z));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(h,"characters/").concat(t,"?").concat(d));case 2:return r=e.sent,e.abrupt("return",N(r.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(h,"characters?name=").concat(t,"&").concat(d));case 2:return r=e.sent,e.abrupt("return",r.data.results.map(N));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(h,"comics/").concat(t,"?").concat(d));case 2:return r=e.sent,e.abrupt("return",Z(r.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){return{id:e.id,name:e.name||"Character",description:e.description||"There is no description",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}},Z=function(e){return{id:e.id,title:e.title,description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," pages"):"No information about the number of pages",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,language:e.textObjects.language||"en-us",price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available"}};return{loading:t,error:a,process:l,setProcess:u,getAllCharacters:b,getCharacter:v,getCharacterByName:g,clearError:o,getAllComics:_,getComic:j}}},7581:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(458),a=n(2312),s=n(184),c=function(){return(0,s.jsxs)("div",{className:"skeleton",children:[(0,s.jsx)("h2",{className:"skeleton__title",children:"Please select a character from the list on the left to view the information"}),(0,s.jsxs)("div",{className:"skeleton__row",children:[(0,s.jsx)("div",{className:"skeleton__img"}),(0,s.jsx)("div",{className:"skeleton__name"})]}),(0,s.jsx)("div",{className:"skeleton__row",children:(0,s.jsx)("div",{className:"skeleton__text"})}),(0,s.jsx)("div",{className:"skeleton__row",children:(0,s.jsx)("div",{className:"skeleton__text"})}),(0,s.jsx)("div",{className:"skeleton__row",children:(0,s.jsx)("div",{className:"skeleton__text"})})]})},i=function(e,t,n){switch(e){case"waiting":return(0,s.jsx)(c,{});case"loading":return(0,s.jsx)(r.Z,{});case"confirmed":return(0,s.jsx)(t,{data:n});case"error":return(0,s.jsx)(a.Z,{});default:throw new Error("Unexpected process state")}}},4679:function(e,t,n){e.exports=n.p+"static/media/ErrorMessage.bc41c7f26ab86e33a36d.png"},2318:function(e,t,n){e.exports=n.p+"static/media/avengers.23ae6addf9f7a06910b5.png"},6392:function(e,t,n){e.exports=n.p+"static/media/avengers_logo.907cc9033aa5c42ea32f.png"}}]);
//# sourceMappingURL=609.9ae86eda.chunk.js.map