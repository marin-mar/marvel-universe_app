"use strict";(self.webpackChunkmarvel_universe_app=self.webpackChunkmarvel_universe_app||[]).push([[580],{6464:function(e,t,r){var n=r(5671),a=r(3144),s=r(136),c=r(3668),o=r(2791),i=r(2312),u=r(184),l=function(e){(0,s.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={error:!1},e}return(0,a.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,u.jsx)(i.Z,{}):this.props.children}}]),r}(o.Component);t.Z=l},2312:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(4679),a=r(184),s=function(){return(0,a.jsxs)("div",{className:"error-message",children:[(0,a.jsx)("img",{className:"error-message__icon",src:n,alt:"error - try again later",width:100,height:100}),(0,a.jsx)("p",{className:"error-message__text",children:"something went wrong... try again later"})]})}},3580:function(e,t,r){r.r(t);var n=r(885),a=r(2791),s=r(6871),c=r(6907),o=r(4304),i=r(6464),u=r(7581),l=r(184);t.default=function(e){var t=e.Component,r=e.dataType,p=(0,s.UO)().id,h=(0,a.useState)(null),f=(0,n.Z)(h,2),d=f[0],m=f[1],v=(0,o.Z)(),g=v.clearError,x=v.getComic,b=v.getCharacter,w=v.process,_=v.setProcess;(0,a.useEffect)((function(){k()}),[p]);var k=function(){switch(g(),r){case"comic":x(p).then(j).then((function(){_("confirmed")}));break;case"char":b(p).then(j).then((function(){_("confirmed")}))}},j=function(e){m(e)};return(0,l.jsxs)(c.B6,{children:[(0,l.jsxs)(c.ql,{children:[(0,l.jsx)("title",{children:d?d.title||d.name:"Marvel Single Page"}),(0,l.jsx)("meta",{name:"description",content:d?d.description:"Marvel Single Page"})]}),(0,l.jsx)(i.Z,{children:(0,u.Z)(w,t,d)})]})}},4304:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(5861),a=r(7757),s=r.n(a),c=r(885),o=r(2791),i=function(){var e=function(){var e=(0,o.useState)(!1),t=(0,c.Z)(e,2),r=t[0],a=t[1],i=(0,o.useState)(null),u=(0,c.Z)(i,2),l=u[0],p=u[1],h=(0,o.useState)("waiting"),f=(0,c.Z)(h,2),d=f[0],m=f[1],v=(0,o.useCallback)(function(){var e=(0,n.Z)(s().mark((function e(t){var r,n,c,o,i,u=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"GET",n=u.length>2&&void 0!==u[2]?u[2]:null,c=u.length>3&&void 0!==u[3]?u[3]:{"Content-Type":"application/json"},a(!0),m("loading"),e.prev=5,e.next=8,fetch(t,{method:r,body:n,headers:c});case 8:if((o=e.sent).ok){e.next=11;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(o.status));case 11:return e.next=13,o.json();case 13:return i=e.sent,a(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(5),a(!1),p(e.t0.message),m("error"),e.t0;case 24:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{loading:r,request:v,error:l,clearError:(0,o.useCallback)((function(){p(null),m("loading")}),[]),process:d,setProcess:m}}(),t=e.loading,r=e.request,a=e.error,i=e.clearError,u=e.process,l=e.setProcess,p="https://gateway.marvel.com:443/v1/public/",h="apikey=fdc3403625ab83ef45aae10672f12243",f=0,d=0,m=[],v=[],g=function(){var e=(0,n.Z)(s().mark((function e(){var t,n,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:100,n=a.length>1&&void 0!==a[1]?a[1]:f,e.next=4,r("".concat(p,"characters?offset=").concat(n,"&limit=").concat(t,"&").concat(h));case 4:return e.sent.data.results.forEach((function(e){f++,"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available"!==e.thumbnail.path&&m.push(e)})),e.abrupt("return",m.map(k));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,n.Z)(s().mark((function e(){var t,n,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:100,n=a.length>1&&void 0!==a[1]?a[1]:d,e.next=4,r("".concat(p,"comics?dateDescriptor=thisMonth&orderBy=issueNumber&limit=").concat(t,"&offset=").concat(n,"&").concat(h));case 4:return e.sent.data.results.forEach((function(e){d++,"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available"!==e.thumbnail.path&&v.push(e)})),e.abrupt("return",v.map(j));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,n.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("".concat(p,"characters/").concat(t,"?").concat(h));case 2:return n=e.sent,e.abrupt("return",k(n.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,n.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("".concat(p,"characters?name=").concat(t,"&").concat(h));case 2:return n=e.sent,e.abrupt("return",n.data.results.map(k));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,n.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("".concat(p,"comics/").concat(t,"?").concat(h));case 2:return n=e.sent,e.abrupt("return",j(n.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return{id:e.id,name:e.name||"Character",description:e.description||"There is no description",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}},j=function(e){return{id:e.id,title:e.title,description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," pages"):"No information about the number of pages",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,language:e.textObjects.language||"en-us",price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available"}};return{loading:t,error:a,process:u,setProcess:l,getAllCharacters:g,getCharacter:b,getCharacterByName:w,clearError:i,getAllComics:x,getComic:_}}},7581:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(458),a=r(2312),s=r(184),c=function(){return(0,s.jsxs)("div",{className:"skeleton",children:[(0,s.jsx)("h2",{className:"skeleton__title",children:"Please select a character from the list on the left to view the information"}),(0,s.jsxs)("div",{className:"skeleton__row",children:[(0,s.jsx)("div",{className:"skeleton__img"}),(0,s.jsx)("div",{className:"skeleton__name"})]}),(0,s.jsx)("div",{className:"skeleton__row",children:(0,s.jsx)("div",{className:"skeleton__text"})}),(0,s.jsx)("div",{className:"skeleton__row",children:(0,s.jsx)("div",{className:"skeleton__text"})}),(0,s.jsx)("div",{className:"skeleton__row",children:(0,s.jsx)("div",{className:"skeleton__text"})})]})},o=function(e,t,r){switch(e){case"waiting":return(0,s.jsx)(c,{});case"loading":return(0,s.jsx)(n.Z,{});case"confirmed":return(0,s.jsx)(t,{data:r});case"error":return(0,s.jsx)(a.Z,{});default:throw new Error("Unexpected process state")}}},4679:function(e,t,r){e.exports=r.p+"static/media/ErrorMessage.bc41c7f26ab86e33a36d.png"}}]);
//# sourceMappingURL=580.05eabb35.chunk.js.map